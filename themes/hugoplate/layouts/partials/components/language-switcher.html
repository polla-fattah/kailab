<!-- Language List -->
{{ if hugo.IsMultilingual }}
{{ $class := .Class }}
{{ $context := .Context }}
{{ $pageLang := $context.Lang }}
{{ $pageTranslations := newScratch }}
{{/* First, fill all translations of the Home page (failsafe) */}}
{{ range site.Home.AllTranslations }}
  {{ $pageTranslations.Set .Language.Lang .Permalink }}
{{ end }}
{{/* Second, if a translation exists for the current page for the target language, replace failsafe */}}
{{ range $context.AllTranslations }}
  {{ $pageTranslations.Set .Language.Lang .Permalink }}
{{ end }}

<div class="language-switcher">
  {{ range site.Languages }}
    {{ $targetLang := .Lang }}
    {{ $targetURL := $pageTranslations.Get $targetLang }}
    {{ if ne $pageLang $targetLang }}
      {{ if eq $pageLang "en" }}
        <a href="{{ $targetURL }}" class="language-btn language-btn-kurdish">
          <span class="kurdish-text">کوردی</span>
        </a>
      {{ else if eq $pageLang "ku" }}
        <a href="{{ $targetURL }}" class="language-btn language-btn-english">
          <span class="english-text">English</span>
        </a>
      {{ end }}
    {{ end }}
  {{ end }}
</div>
{{ end }}